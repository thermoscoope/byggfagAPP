import streamlit as st
from openai import OpenAI

# 1. Konfigurasjon og visuelt design
st.set_page_config(page_title="Byggfagtreneren", page_icon="ğŸ—ï¸", layout="centered")

st.markdown("""
    <style>
    .stApp { background-color: #121212; }
    h1, h2, h3, p, span, label, .stMarkdown { color: #FFFFFF !important; }
    .stButton>button { 
        border-radius: 12px; 
        background-color: #FFB300; 
        color: #000000 !important; 
        font-weight: bold;
        width: 100%;
    }
    .stSelectbox label { color: #FFB300 !important; }
    </style>
    """, unsafe_allow_html=True)

# 2. Initialisering
if 'points' not in st.session_state:
    st.session_state.points = 0
if 'messages' not in st.session_state:
    st.session_state.messages = []

# --- TOPP-RAD ---
col1, col2 = st.columns([2, 1])
with col1:
    st.title("ğŸ—ï¸ Byggfagtreneren") #
    st.write(f"Poengsum: **{st.session_state.points}**")

with col2:
    with st.popover("ğŸ¤– AI-Hjelper"):
        st.write("### SpÃ¸r Verksmesteren")
        user_prompt = st.chat_input("Hva lurer du pÃ¥?")
        if user_prompt:
            try:
                if "OPENAI_API_KEY" in st.secrets:
                    client = OpenAI(api_key=st.secrets["OPENAI_API_KEY"])
                    response = client.chat.completions.create(
                        model="gpt-3.5-turbo",
                        messages=[
                            {"role": "system", "content": "Du er en erfaren norsk verksmester
